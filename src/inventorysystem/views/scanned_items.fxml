<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<AnchorPane xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="inventorysystem.controllers.ScannedItemsController"
            styleClass="mainFxmlClass">

    <ScrollPane fitToWidth="true" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0"
                style="-fx-background-color:transparent;">

        <!-- FIXED: Added fx:id="mainVBox" -->
        <VBox fx:id="mainVBox" spacing="25" alignment="TOP_CENTER" prefWidth="1000">
            <padding>
                <Insets top="25" right="25" bottom="25" left="25"/>
            </padding>

            <!-- Title -->
            <Label text="ðŸ“Š Scanned Items Report"
                   style="-fx-font-size:26px; -fx-font-weight:800; -fx-text-fill:#1a1a1a;" />

            <!-- Filter Card -->
            <HBox spacing="15" alignment="CENTER_LEFT"
                  style="-fx-background-color:white; -fx-background-radius:12; -fx-padding:20; -fx-effect:dropshadow(three-pass-box, rgba(0,0,0,0.07), 12, 0, 0, 3);"
                  maxWidth="850">

                <Label text="From:" styleClass="strong-label"/>
                <DatePicker fx:id="startDatePicker" prefWidth="150"/>

                <Label text="To:" styleClass="strong-label"/>
                <DatePicker fx:id="endDatePicker" prefWidth="150"/>

                <Button text="ðŸ” Apply Filter" styleClass="primary-btn" onAction="#onFilterClicked"/>
            </HBox>

            <!-- Table Card -->
            <VBox spacing="15" maxWidth="900"
                  style="-fx-background-color:white; -fx-background-radius:12;
                         -fx-padding:20; -fx-effect:dropshadow(three-pass-box, rgba(0,0,0,0.06), 12, 0, 0, 3);">

                <Label text="Scanned Items" 
                       style="-fx-font-size:18px; -fx-font-weight:700; -fx-text-fill:#333;" />

                <TableView fx:id="tableScannedItems" prefHeight="400" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colItemName" text="Item Name" prefWidth="450"/>
                        <TableColumn fx:id="colScanDate" text="Scan Date" prefWidth="250"/>
                    </columns>
                </TableView>

                <!-- Item Details Card -->
                <TitledPane text="Item Details" expanded="false"
                            style="-fx-background-radius:10; -fx-border-radius:10;">
                    
                    <content>
                        <GridPane hgap="10" vgap="8">
                            <padding>
                                <Insets top="12" right="10" bottom="12" left="10"/>
                            </padding>

                            <columnConstraints>
                                <ColumnConstraints prefWidth="130" halignment="RIGHT"/>
                                <ColumnConstraints prefWidth="350" halignment="LEFT"/>
                            </columnConstraints>

                            <Label text="Item Name:" GridPane.rowIndex="0"/>
                            <Label fx:id="lblName" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                            <Label text="Category:" GridPane.rowIndex="1"/>
                            <Label fx:id="lblCategory" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                            <Label text="Status:" GridPane.rowIndex="2"/>
                            <Label fx:id="lblQuantity" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                            <Label text="Storage:" GridPane.rowIndex="3"/>
                            <Label fx:id="lblLocation" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                            <Label text="Last Scanned:" GridPane.rowIndex="4"/>
                            <Label fx:id="lblLastScan" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                        </GridPane>
                    </content>

                </TitledPane>

            </VBox>

            <!-- Chart Section -->
            <VBox spacing="15" maxWidth="900"
                  style="-fx-background-color:white; -fx-background-radius:12;
                         -fx-padding:20; -fx-effect:dropshadow(three-pass-box, rgba(0,0,0,0.07), 12, 0, 0, 3);">

                <Label text="ðŸ“ˆ Monthly Scanned vs Unscanned"
                       style="-fx-font-size:20px; -fx-font-weight:700; -fx-text-fill:#2c3e50;" />

                <StackPane fx:id="chartContainer" prefHeight="350"
                           style="-fx-background-color:#fafafa; -fx-background-radius:10; -fx-border-radius:10;">
                    <Label fx:id="chartPlaceholder" 
                           text="Loading monthly dataâ€¦"
                           style="-fx-text-fill:#777; -fx-font-size:16px;"/>
                </StackPane>

            </VBox>

        </VBox>

    </ScrollPane>
</AnchorPane>
